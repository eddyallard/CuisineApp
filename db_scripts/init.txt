USE school;

CREATE table User (
	UserId int NOT NULL auto_increment primary key,
    UserName varchar(50) NOT NULL,
    email varchar(50) NOT NULL,
    UserPassword varchar(50) NOT NULL
);


CREATE table Recipe (
	RecipeId int NOT NULL AUTO_INCREMENT primary key,
    RecipeName varchar(50),
    RecipeInstruction varchar(1000)
);

CREATE table Ingredient (
	IngredientId int NOT NULL AUTO_INCREMENT primary key,
    IngredientName varchar(50),
    measureType ENUM('g.','ml.','unit')
);

CREATE table RecipeIngredient (
	IngredientId int NOT NULL,
    RecipeId int NOT NULL,
    Quantity float,
    primary key(IngredientId, RecipeId),
    foreign key(IngredientId) REFERENCES Ingredient(IngredientId),
    foreign key(RecipeId) REFERENCES Recipe(RecipeId)
);

CREATE table UserIngredient (
	IngredientId int NOT NULL,
    UserId int NOT NULL,
    Quantity float,
    primary key(IngredientId, UserId),
    foreign key(IngredientId) REFERENCES Ingredient(IngredientId),
    foreign key(UserId) REFERENCES User(UserId)
);

CREATE table Vote (
	UserId int NOT NULL,
    RecipeId int NOT NULL,
    VoteValue int NOT NULL default 0,
    primary key(UserId, RecipeId),
    foreign key(UserId) REFERENCES User(UserId),
    foreign key(RecipeId) REFERENCES Recipe(RecipeId)
);

ALTER TABLE Recipe ADD UserId INT NOT NULL;
ALTER TABLE Recipe ADD CONSTRAINT fk_UserId FOREIGN KEY (UserId) REFERENCES User(UserId);


INSERT INTO Ingredient(IngredientName,measureType)
VALUES('flour', 'g.'),
('egg','unit'),
('milk','ml.'),
('chicken breast','g.'),
('garlic clove','unit'),
('sugar','g.'),
('salt','g.'),
('rice','g.'),
('vegetable oil','ml.'),
('ham','unit'),
('beef steak','unit'),
('ginger','g.'),
('cheddar cheese','g.'),
('mozzarella cheese','g.'),
('scallions','g.'),
('tofu','g.'),
('carrot','unit'),
('brocoli','unit'),
('honey', 'ml.'),
('mustard', 'ml.'),
('soy sauce','ml.'),
('pepper','g.'),
('orange', 'unit'),
('whole turkey' , 'unit'),
('white onion','unit'),
('corn cob','unit'),
('mayonnaise','ml.'),
('common mushroom','unit'),
('lemon','unit'),
('beet', 'unit'),
('turnip','unit'),
('shrimp','g.'),
('tomato','unit'),
('chicken broth','unit'),
('almonds','g.')

